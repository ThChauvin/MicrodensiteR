{
    "collab_server" : "",
    "contents" : "#' Ajout\n#'\n#' @return\n#' @export\n#' @param pp the pattern you want to recognize in the name of the files you want to work on.\n#' @examples\najout<-function(pp = \"dat\")\n{\n  #source(\"ajout.R\");ajout.R()\n  liste<-objects(pattern= pp ,pos=1)\n  #ajouter des limites\n  n<-50\n  par(mfrow=c(1,1),pty=\"m\")\n  for (i in 1:length(liste)) #sequence) #:length(liste))\n  {\n    nouvelim<-NULL #vecteur destin? ? contenir les nlles limites\n    nom<-liste[i]\n    print(i);print(nom)\n    donnees<-get(nom,pos=1)\n    profil<-donnees$profil\n    x<-seq(along=profil)\n    limites<-c(1,donnees$limites)\n    mil<-donnees$millesimes\n    l<-length(mil)\n    p<-ceiling(l/n) #nb de fen?tres\n    print(paste(\"nb of windows :\",p))\n    pt<-NULL\n    for (j in 1:p)\n    {\n      m1<-(j-1)*n+1\n      m2<-j*n\n      miln<-mil[m1:m2]\n      print(miln)\n      miln<-miln[!is.na(miln)]\n      limn<-limites[m1:(m2+1)]\n      limn<-limn[!is.na(limn)]\n      print(limn)\n      nc<-length(miln) #nb cernes\n      p1<-min(limn)\n      p2<-max(limn)\n      pp<-profil[p1:p2]\n      pt<-c(pt,pp)\n      lp<-length(pp)\n      px<-x[p1:p2]\n      plot(px,pp)\n      abline(v=limn)\n      #points(limn,pt[limn],col=\"green\",pch=3,cex=2)\n      title(main=paste(nom,\"windows\",j,\"\",p))\n      pos<-diff(limn)\n      text(limn[-length(limn)]+pos/2,0.9*max(pp),as.character(miln),srt=90,col=\"red\")\n      print(\"Entrer le nombre de limites a rajouter\")\n      nlr <- readline() #nombre limites ? rajouter = nombre total de limites\n\n\n      if(nlr!=\"0\") #si on a d?sign? une (ou plusieurs ?) limite :\n      {\n        pid <- identify(px,pp,n=nlr) #d?signation d'une limite ? ajouter\n        lpid <- length(pid) #nb de limites ? ajouter\n        print(pid)\n        pidv<-px[pid]\n        limn2<-sort(pidv)\n        nc2<-length(limn2)-1 #nouveau nb de cernes\n        miln2<-miln #min(miln)-1+c(1:nc2)\n        title(main=paste(nom,\"windows\",j,\"\",p))\n        pos1<-c(limn2,NA)-c(NA,limn2)\n        pos2<-pos1[!is.na(pos1)]\n        nouvelim<-sort(c(nouvelim,limn2,limn))\n      }\n      else\n      { print(\"And he signs from the tip of his sword a zero...\")\n        nouvelim<-c(nouvelim,limn)\n      }\n      #readline()\n    }\n    nouvelim<-unique(nouvelim)\n    plot(profil,type=\"l\")\n    abline(v=nouvelim)\n    points(nouvelim,profil[nouvelim],col=2)\n    mila<-max(na.omit(mil))\n    nouveaumil<-sort(seq(from=mila,to=mila-length(nouvelim)+2)) #A VOIR ?\n    pos<-diff(nouvelim)\n    text(nouvelim[-length(nouvelim)]+pos/2,0.95*max(pp),as.character(nouveaumil),cex=0.7,srt=90,col=\"blue\")\n    # readline()\n\n    sortie <- list(length = 3)\n    sortie[[1]] <- profil\n    sortie[[2]] <- nouvelim[-1]\n    sortie[[3]] <- nouveaumil\n    names(sortie) <- c(\"profil\", \"limites\",\"millesimes\")\n    assign(paste(nom,sep=\"\"), sortie, pos = 1, immediate = T)\n\n  }\n}\n\n\n",
    "created" : 1492155562712.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1394120399",
    "id" : "45347A68",
    "lastKnownWriteTime" : 1516624680,
    "last_content_update" : 1516624680054,
    "path" : "D:/thchauvin/Doc-INRA/Stats R/Packages/MicrodensiteR/R/Ajout.R",
    "project_path" : "R/Ajout.R",
    "properties" : {
        "tempName" : "Untitled3"
    },
    "relative_order" : 10,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}